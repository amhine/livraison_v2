# ============================================
# Configuration Spring Boot - Library Management
# Les valeurs sont lues depuis le fichier .env
# ============================================

# Server Configuration
spring.config.import=optional:file:.env.properties

# ============================================
# H2 Database Configuration
# ============================================

# H2 Database URL, Driver, Username, Password (depuis .env)
spring.datasource.url=${DB_URL}
spring.datasource.driver-class-name=${DB_DRIVER}
spring.datasource.username=${DB_USERNAME}
spring.datasource.password=${DB_PASSWORD}
server.port=${SERVER_PORT}

# H2 Console Configuration
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# ============================================
# JPA / Hibernate Configuration
# ============================================

# Hibernate DDL Auto (create, create-drop, update, validate, none)
spring.jpa.hibernate.ddl-auto=update
# Run data.sql AFTER Hibernate creates tables
spring.jpa.defer-datasource-initialization=true
# Ensure SQL init is enabled (useful beyond embedded DBs)
spring.sql.init.mode=always

# Show SQL queries in console
spring.jpa.show-sql=true

# Format SQL queries
spring.jpa.properties.hibernate.format_sql=true

# Hibernate dialect for H2
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect

# ============================================
# Logging Configuration
# ============================================

# Log SQL queries
logging.level.org.hibernate.SQL=DEBUG

# ============================================
# Spring Configuration
# ============================================

# Allow bean definition overriding (pour Ã©viter conflit entre XML et annotations)
spring.main.allow-bean-definition-overriding=true

# ============================================
# OpenAPI / Swagger UI (springdoc)
# ============================================
# Endpoint JSON OpenAPI
springdoc.api-docs.path=/api-docs
# URL UI Swagger
springdoc.swagger-ui.path=/swagger-ui
# Options d'affichage
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.tagsSorter=alpha